(window.webpackJsonptodos=window.webpackJsonptodos||[]).push([[0],{21:function(e,t,n){e.exports=n(33)},33:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(7),c=n(5),u=n(1),i={MOVE_LEFT:"MOVE_LEFT",MOVE_RIGHT:"MOVE_RIGHT",MOVE_UP:"MOVE_UP",MOVE_DOWN:"MOVE_DOWN"},d=Object(u.b)(function(e){return{size:e.board.present.size}})(function(e){var t,n=e.size,r=e.dispatch;return a.a.createElement("div",null,a.a.createElement("h2",null,"Change board size:"),a.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a=parseInt(t.value.trim());a<2||a>20?t.value=n:r(function(e){return{type:"CHANGE_BOARD_SIZE",size:e}}(a))}},a.a.createElement("input",{ref:function(e){return t=e},placeholder:"New Size (2 - 20)"}),a.a.createElement("button",{type:"submit"},"Change")))}),s=n(15),l=n(16),f=n(20),b=n(17),E=n(4),p=n(19),m=function(e){var t=e.exponent,n=e.bgColor,r=e.textColor;return a.a.createElement("div",{className:"tile",style:{backgroundColor:"#"+n,color:"#"+r}},t?Math.pow(2,t):"")},v={0:"cdc1b4",1:"eee3d6",2:"ede0c8",3:"f2b179",4:"f59563",5:"f67e5f",6:"f65e3b",7:"f1d96b",8:"f2cf4d",9:"e5c12b",10:"dfba12",11:"edc501"},O=Object(u.b)(function(e,t){return{bgColor:v[Math.min(t.exponent,11)],textColor:t.exponent>2?"f9f6f2":"776e65"}})(m),h=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(f.a)(this,Object(b.a)(t).call(this))).handleKeyPress=e.handleKeyPress.bind(Object(E.a)(e)),e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"handleKeyPress",value:function(e){var t=null;switch(e.keyCode){case 37:t=i.MOVE_LEFT;break;case 38:t=i.MOVE_UP;break;case 39:t=i.MOVE_RIGHT;break;case 40:t=i.MOVE_DOWN;break;default:return}this.props.allowedMoves.includes(t)&&this.props.onMove(t)}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyPress)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyPress)}},{key:"render",value:function(){return a.a.createElement("div",{className:"board",style:{width:80*this.props.boardSize+"px"}},this.props.board.map(function(e,t){return e.map(function(e,n){return a.a.createElement(O,{key:t+"-"+n,exponent:e})})}))}}]),t}(a.a.Component),_=n(18),M=0,y=V(4);function k(e,t){var n={size:e.size,data:e.data.map(function(e){return e.slice(0)})};return w(n,t.direction),-1===n.data.join().indexOf(M)||z(e,n)?e:(j(n),n)}function w(e,t){switch(t){case"MOVE_LEFT":R(e);break;case"MOVE_RIGHT":e.data=e.data.map(function(e){return e.reverse()}),R(e),e.data=e.data.map(function(e){return e.reverse()});break;case"MOVE_UP":e.data=C(e.data),R(e),e.data=C(e.data);break;case"MOVE_DOWN":e.data=C(e.data.reverse()),R(e),e.data=C(e.data).reverse();break;default:return e}return e}function z(e,t){return JSON.stringify(e)===JSON.stringify(t)}function V(e){var t=Object(_.a)(Array(e)).map(function(t){return Array(e).fill(0)}),n={size:e,data:t};return j(n),n}function j(e){for(;;){var t=N(0,e.size-1),n=N(0,e.size-1);if(e.data[t][n]===M)return e.data[t][n]=N(0,2)>1?2:1,e}}function N(e,t){return Math.floor(Math.random()*(t+1))+e}function C(e){return e[0].map(function(t,n){return e.map(function(e){return e[n]})})}function R(e){for(var t=0;t<e.size;t++){for(var n=0;n<e.size;n++)if(e.data[t][n]!==M)for(var r=n+1;r<e.size;r++)if(e.data[t][r]!==M){e.data[t][n]===e.data[t][r]&&(e.data[t][n]+=1,e.data[t][r]=M);break}e.data[t]=S(e.data[t],e.size)}return e}function S(e,t){for(var n=0,r=0;r<t;r++)e[r]!==M&&(e[n]=e[r],n!==r&&(e[r]=M),n++);return e}function g(e,t){var n={size:e.size,data:e.data.map(function(e){return e.slice(0)})};return w(n,t),!z(e,n)}var D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_BOARD_SIZE":return V(t.size);case"GAME_MOVE":return k(e,t);default:return e}};function T(e){var t=[];for(var n in i)g(e.board.present,n)&&t.push(n);return t}var U=Object(u.b)(function(e){return{boardSize:e.board.present.size,board:e.board.present.data,allowedMoves:T(e)}},function(e){return{onMove:function(t){return e(function(e){return{type:"GAME_MOVE",direction:e}}(t))}}})(h),A=function(e){var t=e.score;return a.a.createElement("h2",null,"Score: ",t)};function I(e){var t=0;return e.data.forEach(function(e){e.forEach(function(e){e>0&&(t+=Math.pow(2,e))})}),t}var x=Object(u.b)(function(e){return{score:I(e.board.present)}})(A),P=n(6),G=n.n(P),L=function(e){var t=e.canUndo,n=e.canRedo,r=e.onUndo,o=e.onRedo;return a.a.createElement("div",{className:"history"},a.a.createElement("h2",null,"History"),a.a.createElement("p",null,a.a.createElement("button",{onClick:r,disabled:!t},"< Undo"),a.a.createElement("button",{onClick:o,disabled:!n},"Redo >")))},H=Object(u.b)(function(e){return{canUndo:e.board.past.length>0,canRedo:e.board.future.length>0}},function(e){return{onUndo:function(){return e(P.ActionCreators.undo())},onRedo:function(){return e(P.ActionCreators.redo())}}})(L),K=function(){return a.a.createElement("div",null,a.a.createElement(d,null),a.a.createElement(x,null),a.a.createElement(U,null),a.a.createElement(H,null))},W=Object(c.b)({board:G()(D)}),F=Object(c.c)(W,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());Object(o.render)(a.a.createElement(u.a,{store:F},a.a.createElement(K,null)),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.efe2d2e9.chunk.js.map